<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 
	@Project : Serendipity
	@File name : MemberDAO.xml
	@Author : 강대규
	@Date : 16.06.08
	@Desc : MemberDAO의 Mapper / 실제 DB연동을 위한 Query가 들어가는 부분
 -->

<mapper namespace="kr.co.serendipity.model.MemberDAO">
	<insert id="joinMember" parameterType="kr.co.serendipity.model.MemberDTO">
		insert into member(user_num,country_code,local_code,name,id,pw,gender,age,hp,email)
		values(member_seq.nextval,#{country_code},#{local_code},#{name},#{id},#{pw},#{gender},#{age},#{hp},#{email})
	</insert>
	
	<select id="localList" resultType="kr.co.serendipity.model.LocalDTO">
		select local_code, local_name from local order by local_code asc
	</select>
	
	<select id="countryList" resultType="kr.co.serendipity.model.CountryDTO">
		select country_code, country_name from country order by country_name asc
	</select>
	
	<select id="login" parameterType="kr.co.serendipity.model.MemberDTO" resultType="kr.co.serendipity.model.MemberDTO">
		select * from member where id=#{id} and pw=#{pw}
	</select>

	<delete id="withdrawAccount">
		delete from member where user_num=#{user_num}
	</delete>
	
	<select id="loginCheck" resultType="Integer">
		select count(*) from member where id=#{id} and pw=#{pw}
	</select>

</mapper>