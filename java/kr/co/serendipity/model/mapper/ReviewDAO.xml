<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.co.serendipity.model.ReviewDAO">
	<insert id="reviewWrite">
		insert into review(review_num, user_num, review_title, review_content, review_content1, review_content2, review_content3, review_content4, review_content5, review_picture1, review_picture2, review_picture3, review_picture4, review_picture5, like_count, review_date, local_code)
		values(review_seq.nextval, #{user_num}, #{review_title}, #{review_content}, #{review_content1}, #{review_content2}, #{review_content3}, #{review_content4}, #{review_content5}, #{review_picture1}, #{review_picture2}, #{review_picture3}, #{review_picture4}, #{review_picture5}, 0, SYSDATE,#{local_code})
	</insert>
	
	<select id="localList" resultType="kr.co.serendipity.model.LocalDTO">
		select local_code, local_name from local order by local_code asc
	</select>
	
	<select id="reviewList" resultType="kr.co.serendipity.model.ReviewDTO">
		select review_num,user_num,review_title, review_date, review_content,review_picture1,like_count,local_code from review order by review_num desc
	</select>
	
	<select id="reviewDetail" resultType="kr.co.serendipity.model.ReviewDTO">
		select review_num,user_num,review_title, review_date, review_content, review_content1, review_content2, review_content3, review_content4, review_content5,review_picture1, review_picture2, review_picture3, review_picture4, review_picture5, like_count,local_code from review where review_num=#{review_num}
	</select>
	
	<select id="getReviewListCount" resultType="Integer">
		select count(*) from review
	</select>
	
	<delete id="reviewDelete">
		delete from review where review_num=#{review_num}
	</delete>
	
	<update id="reviewUpdate">
		update review set review_title=#{review_title}, review_content=#{review_content}, review_content1=#{review_content1}, review_content2=#{review_content2}, review_content3=#{review_content3}, review_content4=#{review_content4}, review_content5=#{review_content5}, review_picture1=#{review_picture1}, review_picture2=#{review_picture2}, review_picture3=#{review_picture3}, review_picture4=#{review_picture4}, review_picture5=#{review_picture5}, review_date=sysdate where review_num=#{review_num}
	</update>
	
</mapper>